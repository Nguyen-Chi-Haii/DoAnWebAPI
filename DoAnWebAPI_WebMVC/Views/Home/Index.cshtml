@* File: Views/Home/Index.cshtml *@

@{
    ViewData["Title"] = "Trang chủ";
}

<div id="image-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 pb-20">
    @* Ảnh sẽ được render vào đây bởi JavaScript *@
</div>

<div id="loading-indicator" class="hidden text-center py-6">
    <div class="inline-flex items-center gap-2 text-gray-600">
        <i data-lucide="loader-2" class="w-5 h-5 animate-spin"></i>
        <span>Đang tải ảnh...</span>
    </div>
</div>
<div class="flex justify-center items-center gap-4 mt-8 mb-4" style="
    margin: 0 0 50px;
">
    <button id="prev-page-btn" class="p-2 bg-white border border-gray-300 rounded-lg shadow-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100 transition">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
    </button>
    <span id="page-info-display" class="text-sm text-gray-700">Trang <b>1</b> / 1</span>
    <button id="next-page-btn" class="p-2 bg-white border border-gray-300 rounded-lg shadow-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100 transition">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
    </button>
</div>
<div id="no-more-images" class="hidden text-center py-4 text-gray-500">...</div>

@* Phần Partial View cho Modal. 
    Dòng này sẽ render HTML của ImageDetail.cshtml vào trang chủ.
*@
@await Html.PartialAsync("~/Views/Image/ImageDetail.cshtml")

@section Scripts {
    @* Thêm 2 file script cần thiết cho trang chủ *@
    <script src="~/js/ImageDetail.js" asp-append-version="true"></script>
    <script>
        // Truyền các ID cần thiết sang cho JavaScript
        const COLLECTION_ID = '@ViewBag.CollectionId';
        const CURRENT_USER_ID = '@(Context.Session.GetString("UserId"))';
    </script>
}