<!-- MAIN CONTENT -->
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    ViewData["Title"] = "Quản lý Ảnh";
}
<main class="flex-1 overflow-y-auto p-4 sm:p-6 pt-20 lg:pt-6">
    <h1 class="text-2xl font-bold mb-4 flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2" /><circle cx="9" cy="9" r="2" /><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" /></svg>
        Quản lý Ảnh
    </h1>

    <!-- THANH TÌM KIẾM + LỌC -->
    <div class="flex flex-col sm:flex-row justify-between items-center gap-3 mb-6">
        <div class="flex items-center w-full sm:w-1/2 bg-white rounded-lg border border-gray-300 px-3 py-2 shadow-sm">
            <input type="text"
                   id="search-input"
                   placeholder="Tìm kiếm theo tiêu đề..."
                   class="flex-1 outline-none text-sm text-gray-700 bg-transparent" />
        </div>

        <div class="flex gap-2 w-full sm:w-auto justify-end">
            <button id="filter-button" class="flex items-center gap-2 bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" /></svg>
                Lọc
            </button>

            <!-- Đổi button thành thẻ <a> và thêm href -->
            <a href="/Image/AddImage" class="flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition no-underline">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" x2="12" y1="5" y2="19" /><line x1="5" x2="19" y1="12" y2="12" /></svg>
                Thêm Ảnh
            </a>
        </div>
    </div>

    <!-- DANH SÁCH ẢNH (Container để JS chèn vào) -->
    <div id="image-list-container" class="flex flex-col gap-4">
        <!-- JS sẽ render các item ảnh vào đây -->
    </div>
    <p id="no-results" class="text-center text-gray-500 italic hidden">
        Không có ảnh nào phù hợp với điều kiện lọc.
    </p>

    <!-- PHÂN TRANG -->
    <div id="pagination-container" class="flex justify-center items-center gap-3 mt-6">
        <button id="prev-page" class="p-2 bg-white border rounded-lg disabled:opacity-50 hover:bg-blue-50 transition">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6" /></svg>
        </button>
        <span id="page-info" class="text-sm">
            Trang <b>1</b> / 1
        </span>
        <button id="next-page" class="p-2 bg-white border rounded-lg disabled:opacity-50 hover:bg-blue-50 transition">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6" /></svg>
        </button>
    </div>
    <!-- ============== POPUP LỌC (Mặc định ẩn) ============== -->
    <div id="filter-popup" class="fixed inset-0 bg-black/40 flex justify-center items-center z-50 px-3 hidden">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-md p-6 relative">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-semibold">Bộ lọc nâng cao</h2>
                <button id="close-filter-popup" class="text-gray-400 hover:text-gray-700 transition">
                    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10" /><line x1="15" x2="9" y1="9" y2="15" /><line x1="9" x2="15" y1="9" y2="15" /></svg>
                </button>
            </div>
            <div class="space-y-4 text-sm">
                <div>
                    <label class="font-medium">Chủ đề</label>
                    <select id="topic-filter-select" class="w-full mt-1 border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-400">
                        <option value="Tất cả">Tất cả chủ đề</option>
                        <option value="Thiên nhiên">Thiên nhiên</option>
                        <option value="Động vật">Động vật</option>
                        <option value="Kiến trúc">Kiến trúc</option>
                    </select>
                </div>
                <div>
                    <label class="font-medium">Tag</label>
                    <input type="text" id="tag-filter-input" placeholder="Nhập tag, ví dụ: hoàng hôn" class="w-full mt-1 border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-400" />
                </div>
                <div>
                    <label class="font-medium">Ngày đăng</label>
                    <input type="date" id="date-filter-input" class="w-full mt-1 border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-400" />
                </div>
            </div>
            <div class="flex justify-end gap-2 mt-6">
                <button id="clear-filters-btn" class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition text-sm">
                    Xóa bộ lọc
                </button>
                <button id="apply-filters-btn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm">
                    Áp dụng
                </button>
            </div>
        </div>
    </div>
</main>
<script src="~/js/AdminImages.js"></script>